<%- include("../partials/header")%>

<div class="container" id="quiz-info">
	<div class="row">
		<div class="col-md-3">
			<p class="lead" style="color:rgb(54, 5, 117);"><i class="fas fa-hat-wizard"></i><%=quiz.name%></p>
			<% if(currentUser){ %>
				<p class="lead"><%=currentUser.username%>'s recent Scores:</p>
				<div id="score-board" class="list-group">
					<!-- <li list-group-item active></li>
					<li list-group-item>Info 2</li>
					<li list-group-item>Info 3</li> -->
				</div>
			<% } %>

		</div>
		<div class="col-md-9">
			<div class="thumbnail">
				<img class="img-responsive" src="<%= quiz.image %>">
				<div class="caption-full">
					
					<% if(quiz.difficulty == 'medium') { %>
						<h4 class="pull-right" style="color:mediumslateblue;">difficulty: <span id="difficulty-type" style="color: gold;"><%= quiz.difficulty%></span></h4>
					<% } else if (quiz.difficulty == 'easy') { %>
						<h4 class="pull-right" style="color:mediumslateblue;">difficulty: <span id="difficulty-type" style="color: green;"><%= quiz.difficulty%></span></h4>
						<% } else if(quiz.difficulty == 'hard') { %>
							<h4 class="pull-right" style="color:mediumslateblue;">difficulty: <span id="difficulty-type" style="color: red;"><%= quiz.difficulty%></span></h4>
						<% } %>
						<h4 class="pull-right" style="color:rgb(200, 104, 238);">questions: <span id="ques-num" style="color: blue;"><%=quiz.quesnum%></span>&#x0007C;&#x0007C;</h4>
					<h4><a id="Qname"><%=quiz.name%></a></h4>
					<h5>category: <a id="category-type" style="color:rgb(158, 238, 104);"><%=quiz.category%></a></h5>
					<p style="color: red;">
						<% if(!currentUser){ %>
							Please Sign-In to take this quiz
						<% } %>
					</p>
					<p><%=quiz.description%></p>
					<p>
						<em>Submitted By <%= quiz.author.username %><em>
					</p>
					<% if(currentUser && quiz.author.id.equals(currentUser._id) || currentUser && currentUser.isAdmin){ %>

					<a class="btn  btn-xs btn-warning" href="/quizes/<%=quiz._id%>/edit">Edit</a>
					<form class="delete-form" action="/quizes/<%= quiz._id%>?_method=DELETE" method="POST">
						<button class="btn btn-xs btn-danger">Delete</button>
					</form>
					<% } %>
				</div>
			</div>
			<div class="well">
				<div class="text-right">
					<a class="btn btn-success" href="/quizes/<%= quiz._id %>/comments/new">Add New Comment</a>
				</div>
				<hr>
				<% quiz.comments.forEach(function(comment){ %>
					<div class="row">
						<div class="col-md-12">
							<strong><%= comment.author.username %></strong>
							<span class="pull-right"> just now </span>
							<p>
								<%= comment.text %>
							</p>
							<% if(currentUser && comment.author.id.equals(currentUser._id) || currentUser && currentUser.isAdmin){ %>
							<a 
							class="btn btn-xs btn-warning" 
							href="/quizes/<%= quiz._id %>/comments/<%= comment._id %>/edit">Edit
							</a>
							<form class="delete-form"
							action="/quizes/<%= quiz._id %>/comments/<%= comment._id %>?_method=DELETE" method="POST">
								<input type="submit" class="btn btn-xs btn-danger" value="Delete">
							</form>
							<% } %>
						</div>
					</div>
				<% }) %>
			</div>
		</div>
	</div>
</div>

<div id="quiz-area">
	        <!-- start Quiz button -->
    
	<% if(currentUser){ %>
		<div class="start_btn"><button>Start Quiz</button></div>
	<% } %>

    <!-- Info Box -->
    <div class="info_box">
        <div class="info-title"><span>Hey fellow QuizWhiz! Some Rules of this Quiz</span></div>
        <div class="info-list">
            <div class="info">1. You will have only <span>15 seconds</span> per each question.</div>
            <div class="info">2. Once you select your answer, it can't be undone.</div>
            <div class="info">3. You can't select any option once time goes off.</div>
            <div class="info">4. You can't exit from the Quiz while you're playing.</div>
            <div class="info">5. You'll get points on the basis of your correct answers (100 points each), time spent (1 point deduction each second) and hints used (10 points deduction at each hint).</div>
        </div>
        <div class="buttons">
            <button class="quit">Exit Quiz</button>
            <button class="restart">Continue</button>
        </div>
    </div>

    <!-- Quiz Box -->
    <div class="quiz_box">
        <header>
            <div ><i style="color: gold;" class="fas fa-brain title">QuizWhiz</i></div>
			<button id="hint"><i class="far fa-lightbulb" style="color: gold;"></i>Hint</button>
            <div class="timer">
                <div class="time_left_txt">Time Left</div>
                <div class="timer_sec">15</div>
            </div>
            <div class="time_line"></div>
        </header>
        <section>
            <div class="que_text">
                <!-- Here I've inserted question from JavaScript -->
            </div>
            <div class="option_list">
                <!-- Here I've inserted options from JavaScript -->
            </div>
        </section>

        <!-- footer of Quiz Box -->
        <footer>
            <div class="total_que">
                <!-- Here I've inserted Question Count Number from JavaScript -->
            </div>
            <button class="next_btn">Next Question</button>
        </footer>
    </div>

    <!-- Result Box -->
    <div class="result_box">
        <div class="icon">
            <i class="fas fa-crown" style="color:gold;"></i>
        </div>
        <div class="complete_text">You've completed the Quiz!</div>
        <div class="score_text">
            <!-- Here I've inserted Score Result from JavaScript -->
        </div>
		<div style="color:blue; font-size: 50px;">Your Score: <span id="final-score"></span></div>
		<button class="twitter-button" id="twitter" title="Tweet This!">
			<i class="fab fa-twitter"></i>
		</button>
        <div class="buttons">
            <button class="restart">Replay Quiz</button>
            <button class="quit">Quit Quiz</button>
        </div>
    </div>
	<!-- Inside this JavaScript file I've inserted Questions and Options only -->
	<script src="/quizscript/questions.js"></script>

	<!-- Inside this JavaScript file I've coded all Quiz page Codes -->
	<script src="/quizscript/mainquiz.js"></script>
	
</div>

<%- include("../partials/footer")%>